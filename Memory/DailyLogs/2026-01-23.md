# Daily Log - 2026-01-23

## Session Info
- **Date**: 2026-01-23
- **Time**: 01:18 - 03:05 (+07:00)
- **Case Study**: 2 (Dashboard)
- **Duration**: ~2 hours

---

## Objectives
1. Analyze CEO memo and identify requirements
2. Assess current codebase state
3. Fix UI issues reported by user

---

## Work Done

### 1. CEO Memo Analysis
- Identified 3 core metrics: Earnings, Vacation, Benefits
- Identified 4 alert types: Anniversary, Vacation, Benefits Change, Birthday
- Confirmed assumptions:
  - Shareholder = Employees with equity
  - Refresh rate = Daily batch (not real-time)
  - Alerts = In-app only (no email/SMS)
  - Thresholds = Configurable

### 2. Codebase Assessment
- Reviewed `Dashboard.jsx`, `AlertsPanel.jsx`, `DrilldownModal.jsx`
- Reviewed `dashboard.controller.js`, `alerts.controller.js`
- Analyzed `aggregate-dashboard.js` (575 lines)
- Confirmed dynamic threshold reading from Alert collection

### 3. Bug Fixes

#### Issue A: Alert Cards Empty (No Preview)
- **Root Cause**: `aggregate-dashboard.js` saves `matching_employees: []` empty
- **Fix**: Modified `alerts.controller.js` to fetch first 5 employees from `AlertEmployee` table
- **File**: `src/controllers/alerts.controller.js` (lines 202-235)

#### Issue B: Jump to Page Feature
- **Request**: User wanted input field to jump to specific page
- **Fix**: Added `page-input` element in `AlertsPanel.jsx`
- **Added CSS**: `AlertsPanel.css` (lines 386-425)

---

## Decisions Made

| Decision | Rationale |
|----------|-----------|
| Fix in Backend, not aggregation script | Avoids need to re-run 66-second aggregation |
| Use Promise.all for async map | Required for await inside map function |
| Hide number spinners in CSS | Cleaner UX for page input |

---

## Open Questions
1. Should we add Alert Configuration UI? (Nice-to-have for Case 2)
2. When to proceed to Case Study 3?

---

## Next Steps
1. User testing of today's fixes
2. Consider Alert Config UI if user requests
3. Prepare for Case Study 3 (data consistency)
